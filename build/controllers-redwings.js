!function(){function e(n,r,t){function i(o,s){if(!r[o]){if(!n[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[o]={exports:{}};n[o][0].call(f.exports,function(e){var r=n[o][1][e];return i(r||e)},f,f.exports,e,n,r,t)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}return e}()({1:[function(e,n,r){!function(){function n(r,t,i){function a(s,u){if(!t[s]){if(!r[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[s]={exports:{}};r[s][0].call(l.exports,function(e){var n=r[s][1][e];return a(n||e)},l,l.exports,n,r,t,i)}return t[s].exports}for(var o="function"==typeof e&&e,s=0;s<i.length;s++)a(i[s]);return a}return n}()({1:[function(e,n,r){"use strict";function t(e,n){return{restrict:"A",link:function(){n(function(){e.ready.then(function(){var n=$(".passengerForm__js"),r=$(".customerForm__js");$(".inp",n).filter(function(e,n){return $("label.inp-label",n).length}).add(".inp",r).filter(function(e,n){return!$(".customCheckbox",n).length}).each(function(n,r){var t=$(r),i=$("label.inp-label",t),a=$("input",t);if(a.attr("placeholder",""),t.addClass("inp-animate-outer"),a.addClass("inp-animate-placeholder"),i.length)i.wrapInner("<span />"),i.attr("class","inp-animate-label"),i.detach().appendTo(t);else{var o=a.attr("name"),s=e.getAlias("web.customerInfo.".concat(o)),u=$("<label class='inp-animate-label'><span>".concat(s,"</span></label>"));t.append(u)}})})},0)}}}angular.module("webskyUtils").directive("floatingLabels",["backend","$timeout",t])},{}],2:[function(e,n,r){"use strict";function t(){return{scope:!1,controllerAs:"replaceBrandProps",bindToController:!0,scopeAs:"vm",controller:["$scope","backend","utils","$log",i]}}function i(e,n,r,t){function i(e){var n=!1;return e&&l.redefineRules?(l.redefine||(l.brandConfigCopy=JSON.parse(JSON.stringify(e.brandsList))),_.forEach(l.redefineRules,function(r){_.has(r.redefineBy,"time")&&a({redefineRule:r,flights:e.flights})?(t.debug("redefine by flight date"),n=!0,l.redefine=!0,s(r)):_.has(r.redefineBy,"routes")&&o({redefineRule:r})&&(t.debug("redefine by routes"),n=!0,l.redefine=!0,s(r))}),void(n||u())):!1}function a(e){var n=e.redefineRule,t=e.flights,i=_.flatten(t.map(function(e){return e.flights.map(function(e){return e.date})})),a=n.redefineBy.time,o=a.before,s=a.after;if(o&&s)return!1;for(var u=o?o:s,c=0;c<i.length;c++){var f=i[c],l=r.compareStringDate(f,u);if(o&&-1===l)return!0;if(s&&l>=0)return!0}}function o(e){var n=e.redefineRule,r=e.flights,t=!1;t=r?_.flatten(r.map(function(e){return e.flights.map(function(e){return[e.origincity,e.destinationcity]})})):_.flatten(l.searchParams.segments.map(function(e){return[e.origin.codeEn,e.destination.codeEn]}));for(var i=t.join(" "),a=0;a<n.redefineBy.routes.length;a++){var o=n.redefineBy.routes[a].join(" ");if(i===o)return!0}return!1}function s(e){e.brands.forEach(function(e){var n=_.findWhere(l.searchResult.brandsList,{code:e.code});n&&(n.props=n.props.map(function(n){var r=_.findWhere(e.props,{code:n.code});return r?r:n}),n.importantProps=n.importantProps.map(function(n){var r=_.findWhere(e.importantProps,{code:n.code});return r?r:n}))})}function u(){t.debug("restore brands info"),l.searchResult.brandsList=l.brandConfigCopy}function c(e){var n=!1;l.redefineRules.forEach(function(r){_.has(r.redefineBy,"time")&&a({redefineRule:r,flights:e})?(t.debug("redefine by flight date"),n=!0,f({rule:r,flights:e})):_.has(r.redefineBy,"routes")&&o({redefineRule:r,flights:e})&&(t.debug("redefine by routes"),n=!0,f({rule:r,flights:e}))}),n||t.debug("we are not redefine any brands here")}function f(e){var r=e.rule,t=e.flights;t.forEach(function(e){e.flights.forEach(function(e){var t=_.findWhere(r.brands,{code:e.brand}),i=[],a=[],o=[],s=JSON.parse(JSON.stringify(_.findWhere(n.getBrandConfig(),{code:e.brand})));s.props=s.props.map(function(e){var n=_.findWhere(t.props,{code:e.code});n&&(e=n);var r="".concat(e.name?e.name:""," ").concat(e.shortDesc?e.shortDesc:"");switch(e.available){case"yes":i.push(r);break;case"no":a.push(r);break;case"paid":o.push(r)}return e}),s.importantProps=s.importantProps.map(function(e){var n=_.findWhere(t.importantProps,{code:e.code});return n?n:e}),e.brandAvailableProps=i,e.brandUnavailableProps=a,e.brandPaidProps=o})})}var l=e.$parent.vm;l.redefine=!1,n.ready.then(function(){try{l.redefineRules=JSON.parse(n.getAlias("web.brandConfig.redefine"))}catch(r){console.error("redefine rules parse error",r)}e.$watch("vm.searchResult",function(e){i(e)}),e.$watch("vm.orderInfo.flights",function(e){e&&c(e)})})}angular.module("webskyUtils").directive("replaceBrandProps",t)},{}],3:[function(e,n,r){"use strict";angular.module("webskyUtils",[]),e("./directives/floatingLabels/floatingLabels"),e("./directives/replaceBrandProps/replaceBrandProps")},{"./directives/floatingLabels/floatingLabels":1,"./directives/replaceBrandProps/replaceBrandProps":2}]},{},[3])},{}],2:[function(e,n,r){"use strict";function t(){var e=setInterval(function(){"function"==typeof $&&($(document).on("click",".js-seat-not-for-all",function(){var e=$(this).attr("selected-flight"),n=$(this).attr("selected-passenger"),r=setInterval(function(){$("#popupSeatMapConfirm-"+e+"-"+n).length&&$("#js-seatmap-limitation-open-popup-"+e+"-"+n).length&&($("#js-seatmap-limitation-open-popup-"+e+"-"+n).click(),clearInterval(r))},500)}),$(document).on("click",".js-seatmap-limitation-button-remove",function(){jQuery.fancybox.close(),$(".js-seatmap-remove-"+$(this).attr("flightNum")+"-"+$(this).attr("passengerNum")).click()}),$(document).on("click",".js-seatmap-limitation-button",function(){jQuery.fancybox.close()}),clearInterval(e))},100)}var i=angular.module("app");i.directive("showSeatConfirmPopup",function(){return{link:function(e,n,r){t()}}})},{}],3:[function(e,n,r){"use strict";e("./directives/show-seat-confirm-popup"),e("@nemo.travel/websky-utils"),angular.module("app").requires.push("webskyUtils")},{"./directives/show-seat-confirm-popup":2,"@nemo.travel/websky-utils":1}]},{},[3]);
//# sourceMappingURL=controllers-redwings.js.map
